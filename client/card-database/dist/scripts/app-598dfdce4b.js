!function(){"use strict";angular.module("card",["ui.router","ui.bootstrap","ngAnimate","am.multiselect","ui.grid","ui.grid.autoResize","ui.grid.expandable"])}(window.angular),function(e){"use strict";function t(e,t){var l="http://cards.topdeckplayer.com/",o=[];return{query:function(s){var r=e.defer();return t.post(l+"api/cards/query",s).success(function(e){o=e,r.resolve(e)}).error(function(e,t){o=[],r.reject(e)}),r.promise},results:function(){return o},list:function(){var l=e.defer();return t.get("/api/cards/").success(function(e){l.resolve(e)}).error(function(e,t){l.reject(e)}),l.promise},teams:function(){var o=e.defer();return t.get(l+"api/lookup/teams").success(function(e){o.resolve(e)}).error(function(e,t){o.reject(e)}),o.promise},cardTypes:function(){var o=e.defer();return t.get(l+"api/lookup/cardtypes").success(function(e){o.resolve(e)}).error(function(e,t){o.reject(e)}),o.promise},powers:function(){var o=e.defer();return t.get(l+"api/lookup/powers").success(function(e){o.resolve(e)}).error(function(e,t){o.reject(e)}),o.promise}}}e.module("card").factory("cardService",["$q","$http",t])}(window.angular),function(e){"use strict";function t(e,t){var l=this;l.showGrid=!1,e.$watch(function(){return t.results()},function(){l.data=t.results(),l.showGrid=(l.data||[]).length>0})}e.module("card").component("cardResults",{templateUrl:"components/card-results/card-results.html",controllerAs:"vm",controller:["$scope","cardService",t]})}(window.angular),function(e){"use strict";function t(e){var t=this;e.teams().then(function(e){t.teams=e}),e.cardTypes().then(function(e){t.cardTypes=e}),e.powers().then(function(e){t.powers=e}),t.query={},t.performQuery=function(){for(var l in t.query)t.query.hasOwnProperty(l)&&(""!==l&&null!==l||delete t.query[l]);return["atk","def","cost"].forEach(function(e){t.hasOwnProperty(e)&&(t.query[e]={},t.query[e][t[e+"Op"]]=t[e])}),0===Object.keys(t.query).length?void(t.noQuery=!0):void e.query(t.query)},t.performReset=function(){t.query={},["atk","def","cost"].forEach(function(e){t.hasOwnProperty(e)&&delete t[e],t.hasOwnProperty(e+"Op")&&delete t[e+"Op"]})}}e.module("card").component("cardFilters",{templateUrl:"components/card-filters/card-filters.html",controllerAs:"vm",controller:["cardService",t]})}(window.angular),function(e){"use strict";function t(e,t){t.otherwise("/"),e.state("index",{url:"",views:{"card-filter":{template:"<card-filters></card-filters>"},"card-results":{template:"<card-results></card-results>"}}})}e.module("card").config(["$stateProvider","$urlRouterProvider",t])}(window.angular),angular.module("card").run(["$templateCache",function(e){e.put("components/card-filters/card-filters.html",'<form id="filters" name="filters" novalidate="" ng-submit="vm.performQuery()"><div class="alert alert-danger" ng-show="vm.noQuery">Please enter a search criteria to continue</div><div class="row"><div class="col-sm-12"><label for="cardName">Card Name</label></div></div><div class="row"><div class="col-sm-4 col-xs-12"><input type="text" class="form-control" id="cardName" ng-model="vm.query.name"></div></div><div class="row"><div class="col-sm-12"><label for="cardType">Card Type</label></div></div><div class="row"><div class="col-sm-12"><am-multiselect multiple="true" ms-selected="There are {{vm.query.type.length}} selected card types" ng-model="vm.query.type" ms-header="Select card types" options="type for type in vm.cardTypes" template-url="multiselect.tmpl.html" change="selected()"></am-multiselect></div></div><div class="row"><div class="col-sm-12"><label for="team">Team</label></div></div><div class="row"><div class="col-sm-12"><am-multiselect multiple="true" ms-selected="There are {{vm.query.team.length}} selected teams" ng-model="vm.query.team" ms-header="Select teams" options="team for team in vm.teams" template-url="multiselect.tmpl.html" change="selected()"></am-multiselect></div></div><div class="row"><div class="col-sm-12"><label for="power">Power</label></div></div><div class="row"><div class="col-sm-12"><am-multiselect multiple="true" ms-selected="There are {{vm.query.powers.length}} selected powers" ng-model="vm.query.powers" ms-header="Select powers" options="power for power in vm.powers" template-url="multiselect.tmpl.html" change="selected()"></am-multiselect></div></div><div class="row"><div class="col-sm-12"><label for="cardText">Card Text</label></div></div><div class="row"><div class="col-sm-12"><input type="text" class="form-control" id="cardText" ng-model="vm.query.rules"></div></div><div class="row"><div class="col-sm-12"><label for="cardCost">Card Cost</label></div></div><div class="row"><div class="col-xs-4 col-sm-3 col-md-1"><select class="form-control" ng-model="vm.costOp"><option value="$eq">&#61;</option><option value="$gt">&gt;</option><option value="$gte">&gt;&#61;</option><option value="$lt">&lt;</option><option value="$lte">&lt;&#61;</option></select></div><div class="col-xs-4 col-sm-3 col-md-1"><input type=\'text"\' class="form-control" id="cardCost" ng-model="vm.cost"></div></div><div class="row"><div class="col-sm-12"><label for="atk">Attack</label></div></div><div class="row"><div class="col-xs-4 col-sm-3 col-md-1"><select class="form-control" ng-model="vm.atkOp"><option value="$eq">&#61;</option><option value="$gt">&gt;</option><option value="$gte">&gt;&#61;</option><option value="$lt">&lt;</option><option value="$lte">&lt;&#61;</option></select></div><div class="col-xs-4 col-sm-3 col-md-1"><input type="number" class="form-control" id="atk" ng-model="vm.atk"></div></div><div class="row"><div class="col-sm-12"><label for="def">Defense</label></div></div><div class="row"><div class="col-xs-4 col-sm-3 col-md-1"><select class="form-control" ng-model="vm.defOp"><option value="$eq">&#61;</option><option value="$gt">&gt;</option><option value="$gte">&gt;&#61;</option><option value="$lt">&lt;</option><option value="$lte">&lt;&#61;</option></select></div><div class="col-xs-4 col-sm-3 col-md-1"><input type="text" class="form-control" id="def" ng-model="vm.def"></div></div><div class="row"><div class="col-sm-12"><br><button type="submit" class="btn btn-primary">Search</button> <button type="button" class="btn btn-default" ng-click="vm.performReset()">Reset</button></div></div></form>'),e.put("components/card-results/card-results.html",'<div ng-show="vm.showGrid" class="panel panel-default results-panel"><div class="panel-heading">There are {{vm.data.length}} result(s)</div><div class="panel-body"><div class="row"><div class="col-xs-12 col-sm-6 col-md-4" ng-repeat="card in vm.data"><img class="card-image center-block" ng-src="/assets/images/cards/{{card._id}}.jpg"></div><div class="clearfix visible-sm-block visible-md-block"></div></div></div></div>')}]);